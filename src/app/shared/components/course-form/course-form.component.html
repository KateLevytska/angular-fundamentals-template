<h2>Create / Edit Course</h2>
<form [formGroup]="courseForm">
  <div class="app-plate">
    <div class="course">
      <h3>Main Info</h3>
      <div formGroupName="textForm">
        <div class="form__control">
          <label for="title">Title</label>
          <input type="text" id="title" placeholder="Input text" formControlName="title" />
          <div *ngIf="( formSubmitted || courseForm.touched)">
            <span id="titleErrorMessage" class="text-danger"
              *ngIf="courseForm.get('textForm.title')?.hasError('required')">
              Title is required.
            </span>
            <span id="titleErrorMessage" class="text-danger"
              *ngIf="courseForm.get('textForm.title')?.hasError('minlength')">
              Title should not be less than 2 symbols
            </span>
          </div>
        </div>
        <div class="form__control">
          <label for="description">Description</label>
          <textarea id="description" name="description" placeholder="Input text" rows="4" cols="5"
            formControlName="description"></textarea>
          <div *ngIf="( formSubmitted || courseForm.touched)">
            <span id="descriptionErrorMessage" class="text-danger"
              *ngIf="courseForm.get('textForm.description')?.hasError('required')">
              Description is required.
            </span>
            <span id="descriptionErrorMessage" class="text-danger"
              *ngIf="courseForm.get('textForm.description')?.hasError('minlength')">
              Description should not be less than 2 symbols
            </span>
          </div>
        </div>
        <h3>Duration</h3>
        <div class="form__control form__half">
          <label for="duration">Duration</label>
          <div class="course__flex">
            <input type="number" id="duration" placeholder="Input duration" formControlName="duration" />
            <div class="course__duration">
              {{ normalizedDurationValue | duration}}
            </div>
          </div>
          <div *ngIf="( formSubmitted || courseForm.touched)">
            <span id="durationErrorMessage" class="text-danger"
              *ngIf="courseForm.get('textForm.duration')?.hasError('required')">
              Duration is required.
            </span>
            <span id="durationErrorMessage" class="text-danger"
              *ngIf="courseForm.get('textForm.duration')?.hasError('min')">
              Duration should be not less than 0
            </span>
          </div>
        </div>
      </div>
      <div formGroupName="authorsForm">
        <h3>Authors</h3>
        <div class="form__control form__half">
          <div class="course__flex">
            <input type="text" id="authorNameInput" placeholder="Input Author Name" formControlName="authorName" />
            <app-button id="createAuthor" buttonText="Create Author" (click)="createAuthor()"></app-button>
          </div>
          <div *ngIf="( formSubmitted || courseForm.touched)" class="form__authors-errors">
            <span class="text-danger" id="authorErrorMessage" *ngIf="authorNameControl.hasError('minlength')">
              Author name should be at least 2 characters.
            </span>

            <span class="text-danger" id="authorErrorMessage" *ngIf="authorNameControl.hasError('pattern')">
              New author should contain only latin letters, numbers and spaces.
            </span>
          </div>
        </div>
      </div>
      <div class="form__bottom">
        <div class="form__control">
          <h3>Authors List</h3>
          <div class="course__authors">
            <p class="course__authors-item" *ngFor="let author of allAuthorsForView">
              {{ author.name }}
              <app-button [buttonNgClass]="'app-button__without-background'" [iconName]="'add'"
                (click)="addCourseItem(author)"></app-button>
            </p>
          </div>
        </div>
        <div class="form__control">
          <h3>Courses Authors List</h3>
          <div class="course__authors">
            <div *ngIf="courseItems.length > 0; else emptyBlock">
              <p class="course__authors-item" *ngFor="let author of courseItems">
                {{ author.name }}
                <app-button [buttonNgClass]="'app-button__without-background'" [iconName]="'trash-can'"
                  (click)="removeCourseItem(author)"></app-button>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
</form>
<div class="form__action">
  <app-button buttonText="Cancel"></app-button>
  <app-button buttonText="Create" type="submit" (click)="onSubmit()"></app-button>
</div>
<ng-template #emptyBlock>
  <p class="course__authors-item">Author list is empty</p>
</ng-template>
